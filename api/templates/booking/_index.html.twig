
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>

<div class="example-wrapper">
    <h1>Les r√©servations</h1>

    <div id ="calendar" class="calendar" data-mdb-monday="true" </div>

   
</div>

<script>
    const calendarElement = document.getElementById('calendar');
   
    calendarElement.addEventListener('addEvent.mdb.calendar',async (e)=>{
        
        const arrivalDate = new Date(e.event.start.date. split('/').reverse().join('-')).toISOString();
        const departureDate = new Date(e.event.end.date. split('/').reverse().join('-')).toISOString();
        
        const data = {
            "clients": [
                "/users/"+{{app.user.id}}
            ],
            "arrivalDate": arrivalDate,
            "departureDate": departureDate,
            "bookingState": "/booking_states/1",
            "cottage": "/cottages/"+{{cottage.id}},
            "createdAt": new Date().toJSON(),
            "updatedAt": new Date().toJSON(),
        }
        const rawResponse = await fetch('https://localhost/bookings', {
            method: 'POST',
            headers: {
            'Accept': 'application/json',
            'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
        });
        
        const fetchBooking = async() => {
        const jsonResponse = await fetch('https://localhost/bookings', {
            method: 'GET',
            headers: {
            'Accept': 'application/json',
            'Content-Type': 'application/json'
            },
        });
            console.log(jsonResponse);
        };
      
    })

    {# custom calendar #}

    {# const events = [
        {
            summary: 'reservation 1',
            start: {
                date: Calendar.dayjs().format('DD/MM/YYYY'),
            },
            end: {
                date: Calendar.dayjs().format('DD/MM/YYYY'),
            },
            color: {
                background: '#f0f',
            },
        },
               {
            summary: 'reservation CAROLE',
            start: {
                date: Calendar.dayjs().format('DD/MM/YYYY'),
            },
            end: {
                date: Calendar.dayjs().format('DD/MM/YYYY'),
            },
            color: {
                background: '#f0f',
            },
        },
    ];

    const calendarInstance = Calendar.getInstance(calendarElement);
    calendarInstance.addEvents(events) #}
</script> 

